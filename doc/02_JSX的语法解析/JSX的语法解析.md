---
title: JSXçš„è¯­æ³•è§£æ
date: 2023-05-07T23:53:37Z
lastmod: 2023-05-13T08:04:20Z
---
# JSXçš„è¯­æ³•è§£æ

ã€€ã€€â€

## è®¤è¯†JSX

### JSXæ˜¯ä»€ä¹ˆï¼Ÿ

* JSXæ˜¯ä¸€ç§**JSçš„è¯­æ³•æ‰©å±•**ï¼Œçœ‹èµ·æ¥åƒXMLè¯­æ³•ï¼Œæ•…ä¹Ÿç§°**JavaScript XML**
* ç”¨äºæè¿°æˆ‘ä»¬çš„UIç•Œé¢ï¼Œå¯ä»¥å’ŒJSèåˆåœ¨ä¸€èµ·ä½¿ç”¨
* ä¸åŒäºVueçš„æ¨¡æ¿è¯­æ³•ï¼Œä¸éœ€è¦å­¦å®ƒçš„ä¸€äº›æŒ‡ä»¤

ã€€ã€€â€

### ä¸ºä»€ä¹ˆReacté€‰æ‹©JSX ï¼ˆé¢è¯•é¢˜ï¼‰

* Reactè®¤ä¸ºæ¸²æŸ“é€»è¾‘æœ¬è´¨ä¸Šå’Œå…¶ä»–çš„viewé€»è¾‘å­˜åœ¨è€¦åˆ

  å¿…é¡»viewéœ€è¦ç»‘å®šäº‹ä»¶ï¼ˆbuttonã€aåŸç”Ÿç­‰ï¼‰

  æ¯”å¦‚åœ¨viewä¸­å±•ç¤ºæ•°æ®çŠ¶æ€

  æ¯”å¦‚åœ¨æŸäº›çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåˆè¦æ”¹å˜UI

ã€€ã€€**ä»–ä»¬ä¹‹é—´æ˜¯å¯†ä¸å¯åˆ†ï¼Œæ‰€ä»¥Reactæ²¡æœ‰å°†æ ‡è®°åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å°†å®ƒä»¬ç»„åˆåˆ°äº†ä¸€èµ·ï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯ç»„ä»¶ï¼ˆComponentï¼‰**

ã€€ã€€â€

### JSXçš„ä¹¦å†™è§„èŒƒ

* JSXçš„é¡¶å±‚åªèƒ½æœ‰**ä¸€ä¸ªæ ¹å…ƒç´ **ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆå¤šæ—¶å€™ä¼šåœ¨å¤–å±‚åŒ…è£¹ä¸€ä¸ªdivå…ƒç´ 
* é€šå¸¸åœ¨jsxçš„å¤–å±‚åŒ…è£¹ä¸€ä¸ªå°æ‹¬å·()ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿é˜…è¯»ï¼Œå¹¶ä¸”jsxå¯ä»¥è¿›è¡Œæ¢è¡Œä¹¦å†™
* JSXä¸­çš„æ ‡ç­¾å¯ä»¥æ˜¯å•æ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒæ ‡ç­¾

  æ³¨æ„ï¼šå¦‚æœæ˜¯å•æ ‡ç­¾ï¼Œå¿…é¡»ä»¥/>ç»“å°¾

ã€€ã€€â€

ã€€ã€€â€

## JSXçš„åŸºæœ¬ä½¿ç”¨

* JSXçš„æ³¨é‡Š

  åœ¨è„šæ‰‹æ¶æ¡†æ¶ä¸­çš„.jsxæ–‡ä»¶ä¸­ctrl+/ å°±æ˜¯æ³¨é‡Š

  ```ts
  return (
              <div>
                {/* JSXçš„æ³¨é‡Šå†™æ³• */}
                <h2>{message}</h2>
              </div>
            );
  ```
* **JSXæ’å…¥å˜é‡ä½œä¸ºå­å…ƒç´ **

  **æƒ…å†µä¸€**ï¼šå†…å®¹æ˜¯**Numberã€Stringã€Array**ç±»å‹æ—¶ï¼Œ**å¯ç›´æ¥æ˜¾ç¤º**

  **æƒ…å†µäºŒ**ï¼šå½“å˜æ˜¯**nullã€undefinedã€Boolean**ç±»å‹æ—¶ï¼Œ**å†…å®¹ä¸ºç©º**

  > å¦‚æœå¸Œæœ›å¯ä»¥æ˜¾ç¤ºnullã€undefinedã€Booleanï¼Œé‚£ä¹ˆéœ€è¦è½¬æˆå­—ç¬¦ä¸²
  >
  > è½¬æ¢çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚toStringæ–¹æ³•ã€å’Œç©ºå­—ç¬¦ä¸²æ‹¼æ¥ï¼ŒString(å˜é‡)ç­‰æ–¹å¼
  >

  **æƒ…å†µä¸‰**ï¼š**Objectå¯¹è±¡ç±»å‹ä¸èƒ½ä½œä¸ºå­å…ƒç´ **
* JSXæ’å…¥è¡¨è¾¾å¼

  è¿ç®—è¡¨è¾¾å¼

  ä¸‰å…ƒè¿ç®—ç¬¦

  æ‰§è¡Œä¸€ä¸ªå‡½æ•°
* **JSXç»‘å®šå±æ€§**

  titleã€srcã€hrefã€

  ç»‘å®šclasså±æ€§åŠ¨æ€ï¼š

  1. ä¸€ï¼šåŠ¨æ€æ‹¼æ¥å­—ç¬¦ä¸²
  2. äºŒï¼šclassåˆ—è¡¨
  3. ä¸‰ï¼šç¬¬ä¸‰æ–¹åº“ classnames

  ```ts
  // 1. æ–¹æ³•ä¸€ï¼šåŠ¨æ€æ‹¼æ¥å­—ç¬¦ä¸²
            const className = `abc cba ${isActive ? "active" : ""}`;
            // 2. æ–¹æ³•äºŒï¼šå°†æ‰€æœ‰classæ”¾åˆ°æ•°ç»„ä¸­
            const classList = ["abc", "cba"];
            if (isActive) classList.push("active");
            // 3. æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“classnames ä»¥åè®²

            return (
              <div>
                {/*ç»‘å®šclass*/}
                <h2 className={className}>ç¬¬ä¸€ç§</h2>
                <h2 className={classList.join(" ")}>ç¬¬äºŒç§</h2>
              </div>
            );
  ```

  ç»‘å®šå†…è”æ ·å¼style

  ```jsx
    {/* ç»‘å®šstyle */}
  <h2 style={{ color: "red", fontSize: "20px" }}>å‘µå‘µ</h2>
  <h2 style={styleObj}>å‘µå‘µ</h2>
  ```

ã€€ã€€â€

ã€€ã€€â€

## ğŸ€JSXçš„äº‹ä»¶ç»‘å®š

* Reactç»‘å®šäº‹ä»¶ VS åŸç”Ÿ

  * åŸç”Ÿï¼šè·å–domåŸç”Ÿ -> æ·»åŠ ç›‘å¬äº‹ä»¶ï¼›ï¼›å¯ä»¥ç›´æ¥æ·»åŠ onclickäº‹ä»¶
  * Reactï¼šé‡‡ç”¨å°é©¼å³°çš„onClickï¼Œåœ¨ { } ä¸­æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°
* thisç»‘å®šçš„é—®é¢˜

  * ç‚¹å‡»äº‹ä»¶è§¦å‘åï¼Œå‘ç°äº‹ä»¶å¤„ç†å‡½æ•°ä¸­thisæŒ‡å‘undefined

    > åŸå› æ˜¯btnClickå‡½æ•°å¹¶ä¸æ˜¯æˆ‘ä»¬ä¸»åŠ¨è°ƒç”¨çš„ï¼Œè€Œä¸”å½“buttonå‘ç”Ÿæ”¹å˜æ—¶ï¼ŒReactå†…éƒ¨è°ƒç”¨äº†btnClickå‡½æ•°
    >
    > è€Œå®ƒå†…éƒ¨è°ƒç”¨æ—¶ï¼Œå¹¶ä¸çŸ¥é“è¦å¦‚ä½•ç»‘å®šæ­£ç¡®çš„this
    >
  * è§£å†³thisç»‘å®šé—®é¢˜

    * ä½¿ç”¨bindæ˜¾ç¤ºç»‘å®šthis
    * ES6 çš„class fieldsè¯­æ³•
    * **äº‹ä»¶ç›‘å¬ä¼ é€’ç®­å¤´å‡½æ•°**

    ```jsx
    btn1Click() {
              console.log("æŒ‰é’®ä¸€", this);
            }
            btn2Click = () => {
              console.log("æŒ‰é’®äºŒ", this);
            };
            btn3Click = () => {
              console.log("æŒ‰é’®ä¸‰", this);
            };
            render() {
              const { message, counter } = this.state;
              return (
                <div>
                  {/* 1ã€thisç»‘å®šä¸€ï¼šæ˜¾ç¤ºbindç»‘å®š */}
                  <button onClick={this.btn1Click}>æŒ‰é’®ä¸€</button>
                  {/* 2ã€thisç»‘å®šäºŒï¼šclass fieldsè¯­æ³• */}
                  <button onClick={this.btn2Click}>æŒ‰é’®äºŒ</button>
                  {/* 3ã€thisç»‘å®šä¸‰ï¼šäº‹ä»¶ç›‘å¬ä¼ é€’ç®­å¤´å‡½æ•° */}
                  <button onClick={() => this.btn3Click()}>æŒ‰é’®ä¸‰</button>
                </div>
              );
            }
    ```
* äº‹ä»¶å‚æ•°ä¼ é€’

  1. ç”¨bindç»‘å®šthisä¼ é€’å‚æ•°

     ä¼ é¢å¤–å‚æ•°ä¼šæœ‰é—®é¢˜

     ```jsx
     <button onClick={this.btnClick.bind(this)}>æŒ‰é’®1</button>
     <button onClick={(event) => this.btnClick(event)}>æŒ‰é’®2</button>
     ```
  2. **æ¨èä½¿ç”¨ç®­å¤´å‡½æ•°å½¢å¼ä¼ å‚**

     ```jsx
      <button onClick={(event) => this.btnClick(event, "www", 18)}>
                     æŒ‰é’®4
                   </button>
     ```

ã€€ã€€â€

## JSXçš„æ¡ä»¶æ¸²æŸ“

* å¸¸è§æ¡ä»¶åˆ¤æ–­

  * **æ¡ä»¶åˆ¤æ–­è¯­å¥**ï¼šé€‚åˆé€»è¾‘æ¯”è¾ƒå¤šçš„æƒ…å†µ

    ```jsx
    let showElement = null;
    if (isReady) {
      showElement = <h2>å‡†å¤‡å¼€å§‹æ¯”èµ›å§ï¼ï¼ï¼</h2>;
    } else {
      showElement = <h1>è¯·åšå¥½å‡†å¤‡å…ˆï¼ï¼ï¼</h1>;
    }

    ã€‚ã€‚ã€‚ã€‚

      {/* 1. æ¡ä»¶åˆ¤æ–­ */}
      <div>{showElement}</div>
    ```
  * **ä¸‰å…ƒè¿ç®—ç¬¦**ï¼šé€‚åˆé€»è¾‘æ¯”è¾ƒç®€å•çš„

    ```jsx
     {/* v-showçš„æ•ˆæœ */}
    <h2 style={{ display: isShow ? "block" : "none" }}>{message}</h2>
    ```
  * **&amp;&amp; è¿ç®—ç¬¦**ï¼šé€‚åˆå¦‚æœæ¡ä»¶æˆç«‹ï¼Œæ¸²æŸ“æŸä¸€ä¸ªç»„ä»¶ï¼›å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼Œä»€ä¹ˆå†…å®¹ä¹Ÿä¸æ¸²æŸ“

    ```jsx
    <div>{isShow && <h2>{message}</h2>}</div>
    ```
  * å¯é€‰é“¾ åé¢è®²

ã€€ã€€â€

## JSXçš„åˆ—è¡¨æ¸²æŸ“

ã€€ã€€å¤§å¤šä¼šé…åˆæ•°ç»„é«˜é˜¶å‡½æ•°åšåˆ—è¡¨æ¸²æŸ“

```jsx
{students
  .filter((student) => student.score > 100)
  .slice(0, 2)
  .map((student) => {
    return (
      <div className="item" key={student.id}>
        <h2>å­¦å·ï¼š{student.id}</h2>
        <h2>å§“åï¼š{student.name}</h2>
        <h2>å¾—åˆ†ï¼š{student.score}</h2>
        </div>
    );
  })}
```

ã€€ã€€â€

## JSXçš„åŸç†å’Œæœ¬è´¨

* **jsx ä»…ä»…åªæ˜¯ React.createElement(component, props, ...children) å‡½æ•°çš„è¯­æ³•ç³–**
* createElementéœ€è¦ä¼ é€’ä¸‰ä¸ªå‚æ•°:

  * **type**ï¼š

    * å½“å‰ReactElementçš„ç±»å‹
    * å¦‚æœæ˜¯æ ‡ç­¾å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤º â€œdivâ€
    * å¦‚æœæ˜¯ç»„ä»¶å…ƒç´ ï¼Œé‚£ä¹ˆå°±ç›´æ¥ä½¿ç”¨ç»„ä»¶çš„åç§°
  * **config**ï¼š

    * æ‰€æœ‰jsxä¸­çš„å±æ€§éƒ½åœ¨configä¸­ä»¥å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å½¢å¼å­˜å‚¨
    * æ¯”å¦‚ä¼ å…¥classNameä½œä¸ºå…ƒç´ çš„class
  * **children**ï¼š

    * å­˜æ”¾åœ¨æ ‡ç­¾ä¸­çš„å†…å®¹ï¼Œä»¥childrenæ•°ç»„çš„æ–¹å¼è¿›è¡Œå­˜å‚¨

> å¯ä»¥å€ŸåŠ©babelå®˜ç½‘ çœ‹åˆ°jsx -> React.createElementçš„èšæè¡¨ç°

ã€€ã€€â€

## è™šæ‹ŸDOMçš„åˆ›å»ºè¿‡ç¨‹

* é€šè¿‡ React.createElement æœ€ç»ˆåˆ›å»ºå‡ºæ¥ä¸€ä¸ª ReactElementå¯¹è±¡
* Reactåˆ©ç”¨ReactElementå¯¹è±¡ç»„æˆäº†**ä¸€ä¸ªJavaScriptçš„å¯¹è±¡æ ‘**

  JavaScriptçš„å¯¹è±¡æ ‘å°±æ˜¯è™šæ‹ŸDOMï¼ˆVirtual DOMï¼‰
* æˆ‘ä»¬å¯ä»¥å°†ä¹‹å‰çš„jsxè¿”å›ç»“æœè¿›è¡Œæ‰“å°

ã€€ã€€â€

* JSX -> è™šæ‹ŸDOM -> çœŸå®DOM

ã€€ã€€â€![1684542977959](image/JSXçš„è¯­æ³•è§£æ/1684542977959.png)

### ä¸ºä½•è¦ä½¿ç”¨è™šæ‹ŸDOMï¼ˆé¢è¯•é¢˜ï¼‰

* å½“æˆ‘ä»¬æœ‰æ•°æ®æ›´æ–°æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„è™šæ‹ŸDOMå¯¹è±¡ï¼Œreactæ ¹æ®æ–°æ—§è™šæ‹ŸDOMå¯¹è±¡çš„diffç®—æ³•å¯¹æ¯”ï¼Œæœ€å°åŒ–çš„æ”¹å˜å˜äº†çš„åœ°æ–¹ï¼Œ**æé«˜æ€§èƒ½**
* reactå¯ä»¥é€šè¿‡æ¡¥æ¥æŠ€æœ¯ï¼ŒæŠŠè™šæ‹ŸDOMå¯¹è±¡è½¬å˜æˆIOS/å®‰å“çš„æ§ä»¶ï¼Œå®ç°äº†**è·¨å¹³å°**
* è™šæ‹ŸDOMå¸®åŠ©æˆ‘ä»¬ä»å‘½ä»¤å¼ç¼–ç¨‹è½¬å˜ä¸º**å£°æ˜å¼ç¼–ç¨‹**

  > Reactå®˜æ–¹çš„è¯´æ³•ï¼šVirtual DOM æ˜¯ä¸€ç§ç¼–ç¨‹ç†å¿µ
  >
  > åœ¨è¿™ä¸ªç†å¿µä¸­ï¼ŒUIä»¥ä¸€ç§ç†æƒ³åŒ–æˆ–è€…è¯´è™šæ‹ŸåŒ–çš„æ–¹å¼ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„JavaScriptå¯¹è±¡
  >
  > æˆ‘ä»¬å¯ä»¥é€šè¿‡root.renderè®© è™šæ‹ŸDOM å’Œ çœŸå®DOMåŒæ­¥èµ·æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å«åšåè°ƒï¼ˆReconciliationï¼‰
  >
  > è¿™ç§ç¼–ç¨‹çš„æ–¹å¼èµ‹äºˆäº†Reactå£°æ˜å¼çš„APIï¼š
  >
  > ä½ åªéœ€è¦å‘Šè¯‰Reactå¸Œæœ›è®©UIæ˜¯ä»€ä¹ˆçŠ¶æ€
  >
  > Reactæ¥ç¡®ä¿DOMå’Œè¿™äº›çŠ¶æ€æ˜¯åŒ¹é…çš„
  >
  > ä½ ä¸éœ€è¦ç›´æ¥è¿›è¡ŒDOMæ“ä½œï¼Œå°±å¯ä»¥ä»æ‰‹åŠ¨æ›´æ”¹DOMã€å±æ€§æ“ä½œã€äº‹ä»¶å¤„ç†ä¸­è§£æ”¾å‡ºæ¥
  >

ã€€ã€€â€

ã€€ã€€â€

## é˜¶æ®µæ¡ˆä¾‹

ã€€ã€€![image](assets/image-20230513000622-93fhdf7.png)

* reactçš„åˆ—è¡¨æ¸²æŸ“é€šå¸¸ä¼šä½¿ç”¨mapé«˜é˜¶å‡½æ•°
* ä¿®æ”¹stateä¸­å¼•ç”¨ç±»å‹çš„æ•°æ®æ—¶

  1. å…ˆæµ…æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡
  2. ä¿®æ”¹æ–°çš„å¯¹è±¡  å°†æ–°å¯¹è±¡èµ‹ç»™stateä¸­çš„æ•°æ®

  ```jsx
  remove(index) {
            const newBooks = [...this.state.books];
            newBooks.splice(index, 1);
            this.setState({
              books: newBooks
            });
          }
  ```
* æŠ½ç¦»ä¸åŒæ¨¡å—ä»£ç 

  æ¯”å¦‚ä¸Šè¿°è¡¨æ ¼ æœ‰æ•°æ®æ—¶æ˜¾ç¤ºè¡¨æ ¼ æ— æ•°æ®æ—¶æ˜¾ç¤ºâ€œè¡¨æ ¼ä¸ºç©ºâ€

  è‹¥ç›´æ¥åœ¨renderä¸­ä½¿ç”¨å˜é‡è¿›è¡ŒæŠ½ç¦» renderä¼šå˜çš„ä¸æ˜“è¯»ï¼›ï¼›å¯ä»¥å°†ä¿©ç§æƒ…å†µåˆ†åˆ«æŠ½ç¦»ä¿©å‡½æ•°  renderå‡½æ•°ä¸­æ ¹æ®å…·ä½“æƒ…å†µå»æ‰§è¡Œå‡½æ•°

  ```jsx
  renderTableList() { ... }
  renderTableEmpty() { ... }
  render() {
            return books.length
              ? this.renderTableList()
              : this.renderTableEmpty();
          }
  ```

ã€€ã€€â€
